angular.module("templates",[]).run(["$templateCache",function(e){e.put("src/templates/angular-schema-form-ionic-autocomplete.html",'<asf-ionic-autocomplete>\n  <input\n    sf-field-model\n    name="{{form.key.slice(-1)[0]}}"\n    type="text"\n    readonly="form.readonly"\n    class="ion-autocomplete {{form.fieldHtmlClass}}"\n    autocomplete="off"\n    ion-autocomplete\n    item-value-key="{{ form.itemValueKey }}"\n    item-view-value-key="{{ form.itemViewValueKey }}"\n    max-selected-items="form.maxSelectedItems"\n    items-method="getItems(query)"\n  />\n</asf-ionic-autocomplete>\n')}]),angular.module("angularSchemaFormIonicAutocomplete",["schemaForm","templates","ionic","ion-autocomplete"]).config(function(e,t){var n=t.builders.sfField,r=t.builders.ngModel,a=t.builders.ngModelOptions,o=t.builders.condition,i=function(e){var t=e.fieldFrag.querySelector("[sf-messages]");if(t){t.setAttribute("ng-messages","ngModel.$error");var n=document.createElement("div");n.setAttribute("sf-message",""),n.setAttribute("ng-message",""),t.appendChild(n)}};e.defineAddOn("ionicDecorator","autocomplete","src/templates/angular-schema-form-ionic-autocomplete.html",[n,r,a,i,o])}).directive("asfIonicAutocomplete",function(){return{link:function(e,t,n){e.getTitleMapAsArray=function(){if(_.isArray(e.form.titleMap))return e.form.titleMap;if(_.isPlainObject(e.form.titleMap))return _.map(e.form.titleMap,function(e,t){return{value:e,name:t}});if(_.isUndefined(e.form.titleMap)){var t=e.schema["enum"]||e.schema.items["enum"];return _.map(t,function(e){return{value:e,name:name}})}throw new Error("Unexpected format for titleMap")},e.mergePropertiesMaps=function(e,t){var n=_.keyBy(e,"value"),r=_.keyBy(t,"value"),a=_.merge({},n,r);return _.values(a)},e.getItems=function(t){var n=_.split(_.lowerCase(t)," "),r=e.getTitleMapAsArray(),a=e.form.filterPropertiesMap,o=e.mergePropertiesMaps(a,r),i=_.filter(o,function(e){var t=_.map(_.values(e),_.lowerCase);return _.every(n,function(e){var n=!!_.find(t,function(t){return _.includes(t,e)});return n})});return i}}}});